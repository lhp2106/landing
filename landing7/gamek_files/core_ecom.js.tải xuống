function coreEcom(m){var d=this,u=[],n=[],p=[],r=[],q=[],t="";this.zoneid=m.ZONEID;this.checkView=!1;this.getCookie=function(a){return void 0!=window.ADS_CHECKER&&"undefined"!=window.ADS_CHECKER?ADS_CHECKER.getStorage(a):0<document.cookie.length&&(c_start=document.cookie.indexOf(a+"="),-1!=c_start)?(c_start=c_start+a.length+1,c_end=document.cookie.indexOf(";",c_start),-1==c_end&&(c_end=document.cookie.length),unescape(document.cookie.substring(c_start,c_end))):""};this.checkCookie=function(a){return"undefined"!=
typeof d.getCookie(a)||""!=d.getCookie(a)?d.getCookie(a):0};this.randomItem=function(a,b){var c=[];if(0<a.length){for(var f=[],e=[],d=0,h=0;h<a.length;h++)e.push(a[h].r),f.push(h),d++;for(h=0;h<b&&!(d<h);h++){for(var k=0,m=[0],l=0;l<e.length;l++)k+=e[l],m.push(k);l=k*Math.random();for(k=1;k<=e.length;k++)m[k]>l&&m[k-1]<l&&(c.push(f[k-1]),f.splice(k-1,1),e.splice(k-1,1))}}b=[];for(l=0;l<c.length;l++)b.push(a[c[l]]);return b};this.logo=function(a){var b={logo:"//adi.admicro.vn/adx/adxecom.png",slogan:"AdX for Ecommerce",
flag:!0,border:"e7e7e7",px:5};if(0<a.length)for(var c=[],d=!1,e=0;e<a.length;e++){var g=a[e];0==c.length&&c.push(g.cid);ADS_CHECKER.in_array(g.cid,c)||(d=!0,c.push(g.cid));a.length-1!==e||d||""===g.logoBrand||""===g.slogan||(b.logo=g.logoBrand,b.slogan=g.slogan,b.flag=!1,b.border=g.border,b.px=2)}return b};this.campaign=function(a,b,c){for(var f=[],e=0;e<a.length;e++)e>=b*c-b&&e<=b*c-1&&f.push(a[e]);d.resetLog();return f};this.dataItem=function(){if(void 0==m.df||null==m.df||1>m.df.length)return AdmLoadDefault("adxzone_"+
d.zoneid),!1;var a=m.df,b=d.checkCookie("__R"),c=d.checkCookie("__RC"),f=[];if(0<a.length){for(var e=[],g=0;g<a.length;g++){var h=a[g].l;(ADS_CHECKER.in_array(b,h)||ADS_CHECKER.in_array(c,h)||""==h)&&e.push(a[g])}0<e.length&&(f=d.randomItem(e,e.length))}return f};this.formatIntNumber=function(a){a=a.toString().replace(".","");var b=parseInt(a)||0;a=a.toString();var c=a.length;1E6<=b?(b=0<c?a.substr(0,c-6)+".":"",a=a.substr(c-6,3),b=b+a+"k"):b=1E6>b&&1E3<b?0<c?a.substr(0,c-3)+"k":"":b;return b};this.getSubString=
function(a,b){var c=a;a.length>b&&(c=a.substr(0,b-4),a=c.lastIndexOf(" "),c=c.substr(0,a),c+="...");return c};this.unescapeHtml=function(a){return a.replace(/&amp;/g,"&").replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/&quot;/g,'"').replace(/&#039;/g,"'").replace(/&nbsp;/g," ")};this.logUrl=function(a){var b=11;"undefined"!=typeof a.isview&&null!=a.isview&&2===parseInt(a.isview)&&(b=12);if("undefined"===typeof a.eid||"undefined"===a.eid||0===parseInt(a.eid))a.eid=0;a.link=a.link.replace("&utm_content=&",
"&utm_content="+document.domain+"&");-1!=a.link.indexOf("[admdomain]")&&(a.link=a.link.replace("[admdomain]",document.domain));var c="//lg1.logging.admicro.vn/ecom?cov=1&items="+encodeURIComponent(a.bid+";"+a.cid+";"+a.pr+";"+b+";"+a.eid)+"&dmn="+encodeURIComponent(document.URL)+"&zid="+d.zoneid+"&cid=-1&re="+encodeURIComponent(a.link)+"&tpn=14&tp=11";"undefined"!=typeof a.cpa&&1==a.cpa&&(c+="&adc_cpa=1");b=a.bid+";"+a.cid+";"+a.pr+";"+b+";"+a.eid;var f="",e="";"undefined"!=typeof a.ext&&"undefined"!=
typeof a.ext.hash&&(f='{"action": "view", "bid": '+a.bid+', "cid": '+a.cid+', "type": "ecom", "zid": '+d.zoneid+', "eid": '+a.eid+"}",e='{"action": "click", "bid": '+a.bid+', "cid": '+a.cid+', "type": "ecom", "zid": '+d.zoneid+', "eid": '+a.eid+"}",f="//lg1.logging.admicro.vn/ab?dmn="+encodeURIComponent(document.URL)+"&h="+a.ext.hash+"&p="+encodeURIComponent(location.pathname)+"&d="+encodeURIComponent(f)+"&re=",e="//lg1.logging.admicro.vn/ab?dmn="+encodeURIComponent(document.URL)+"&h="+a.ext.hash+
"&p="+encodeURIComponent(location.pathname)+"&d="+encodeURIComponent(e)+"&re=");r.push(e);ADS_CHECKER.in_array(b,u)||(n.push(b),u.push(b),p.push(f));q.push(c);return c};this.setClick=function(a,b){for(var c=0;c<q.length;c++)try{var f=a.getElementById(b+"_"+c);f&&d.loadClick(f,c)}catch(e){}};this.loadClick=function(a,b){a.addEventListener("click",function(){var a=q[b];"undefined"!=typeof a&&""!=a&&window.open(a,"_blank");a=r[b];"undefined"!=typeof a&&""!=a&&((new Image).src=a)})};this.resetLog=function(){q=
[];r=[]};this.logItemView=function(){var a="";if(0<n.length){for(var b=0;b<n.length;b++)a+=n[b]+",";""!=a&&(t="//lg1.logging.admicro.vn/ecom?cov=0&items="+encodeURIComponent(a.slice(0,-1))+"&dmn="+encodeURIComponent(document.URL)+"&zid="+d.zoneid+"&cid=-1&tpn=14&tp=11"+__AdmsendRandom,n=[],d.sendLogView())}};this.checkBoxView=function(){return d.checkView};this.sendLogView=function(){var a=function(){try{var a=document.getElementById("adxzone_"+d.zoneid);d.checkView=!1;a&&(window["visibility_adxzone_"+
d.zoneid]=VisSense(a,{fullyvisible:.5}).monitor({fullyvisible:function(){if(document.images&&""!=t){var a=new Image;a.src=t;for(var b=0;b<p.length;b++)a=new Image,a.src=p[b];p=[];d.checkView=!0}window["visibility_adxzone_"+d.zoneid].stop()}}).start())}catch(c){}};"function"==typeof VisSense?a():d.loadJs("https://adi.admicro.vn/adt/banners/nam2015/4699/library/vissense.min.js",function(){a()})};this.loadJs=function(a,b){var c=document.createElement("script");document.getElementsByTagName("head")[0].appendChild(c);
c.onload=function(){"function"==typeof b&&b();b=null};c.onreadystatechange=function(){if(4==c.readyState||"complete"==c.readyState)"function"==typeof b&&b(),b=null};c.src=a}};
